<h1>Enable Question Assesment</h1>
<div class="listing-holder">
  <table class="table table-condensed">
    <thead>
      <th>Degree</th>
      <th>Subject</th>
      <th>Enable</th>
    </thead>

    <% @course_degree_hash.each_with_index do |(degree,course),index| %>
        <% degree_id,degree_name,course_id = degree.split("_") %>
        <tr>
          <td><%= degree_name %></td>
          <td><%= course.name %></td>
          <td><input type="checkbox" <%='checked=checked' if WorkflowPath.check_state(degree_id,course_id) %> id="checkbox_<%=index%>" value="1" onclick="toggle_workflow_path(<%=degree_id%>,<%= course_id %>,'checkbox_<%=index%>')"></td>
        </tr>
    <% end %>
  </table>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $('.table').dataTable({
            "paging":   false,
            "bFilter": false,
        });
    });
    function toggle_workflow_path(degree_id,course_id,id){
        var value = 1;
        if($("#"+id).is(":checked") == true){
        value = 1;
        }
        else
        {
            value = 0;
        }

        $.ajax({
            url:'/workflow_paths/toggle_workflow?degree_id='+degree_id + '&course_id='+course_id + '&value='+value,
            type:'get',
            dataType:'html',
            processData:false,
            success:function (data) {

            },
            error:function (data) {
                //    window.location.reload();
            }
        });
    }
</script>
