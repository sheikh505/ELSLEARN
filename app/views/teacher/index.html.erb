<%= link_to "Manage Users", user_path, class: "btn btn-primary" %> |
<%= link_to "Manage Roles", roles_path, class: "btn btn-primary" %>
<br><br>

<%= label_tag :select_role %>
<%= select_tag "role", options_from_collection_for_select(@roles, :id, :name) %>

<div class="listing-holder listing_data_table">
<table class="table table-condensed">
  <thead>
  <th>Emails</th>
  <th>Name</th>
  <th>Contact number</th>
  <th>Role</th>
  <th>Action</th>
  </thead>
<tbody>
  <%@users.each do |user|  %>
<tr>
  <td><%= user.email %></td>
  <td><%= user.name %></td>
  <td><%= user.phone %></td>
  <td><%= user.roles.first.name unless user.roles.first.nil? %></td>
  <td><%= link_to 'Edit', edit_teacher_path(user) %>/
    <%= link_to 'Delete', user, :method=> :delete, :data=> { :confirm=> 'Are you sure?' } %></td>



</tr>



  <% end %>
</tbody>


</table>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $('.table').dataTable();
    } );

    $('#role').on("change", function(){
      role_id = $('#role').val();
      $.ajax({
        url: "/teachers/fetch_users?role_id=" + role_id,
        success: function(data){
          $('.listing-holder').html(data);
        }
      })
    });
</script>
<% if current_user.is_proofreader? %>
    <%= link_to 'Add new operator', user_new_path, :class=> 'btn btn-large btn-inverse' %>
<% else %>
    <%= link_to 'Add new user', user_new_path, :class=> 'btn btn-large btn-inverse' %>
<% end %>
